<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="hevea 2.18">
<style type="text/css">
.c000{color:#4C1919}
.c001{color:#4C4C00}
.c002{color:black}
.c003{font-family:monospace}
.c004{font-family:monospace;background-color:#FFE5CC}
.c005{font-family:sans-serif}
.c006{font-family:sans-serif;font-weight:bold}
.c007{font-size:small}
.c008{font-style:italic}
.c009{font-weight:bold}
.c010{font-weight:bold;color:#19194C}
.c011{padding:1ex;border-style:solid none;}
.c012{text-align:center;border:solid 1px;white-space:nowrap}
.c013{text-align:left;border:solid 1px;white-space:nowrap}
.c014{width:80%;height:2}
.li-itemize{margin:1ex 0ex;}
.dd-description{margin:0ex 0ex 1ex 4ex;}
.dt-description{margin:0ex;}
div.footnotetext P{margin:0px; text-indent:1em;}
.title{margin:2ex auto;text-align:center}
.titlemain{margin:1ex 2ex 2ex 1ex;}
.titlerest{margin:0ex 2ex;}
.center{text-align:center;margin-left:auto;margin-right:auto;}
div table{margin-left:inherit;margin-right:inherit;margin-bottom:2px;margin-top:2px}
td table{margin:auto;}
table{border-collapse:collapse;}
td{padding:0;}
.cellpadding1 tr td{padding:1px;}
pre{text-align:left;margin-left:0ex;margin-right:auto;}
blockquote{margin-left:4ex;margin-right:4ex;text-align:left;}
td p{margin:0px;}
.lstlisting{font-family:monospace;white-space:pre;margin-right:auto;margin-left:0pt;text-align:left}
</style>
<link rel="stylesheet" type="text/css" href="http://slimmer.gforge.inria.fr/bedwyr/bd.css">
<title>A Quick-Start Guide to 
Bedwyr v1.4
</title>
</head>
<body>
<!--HEVEA command line is: /usr/bin/hevea -O png.hva -fix quickstart -->
<!--CUT STYLE article--><!--CUT DEF section 1 --><table class="title"><tr><td style="padding:1ex"><h1 class="titlemain"><span style="font-size:xx-large"><span style="font-size:150%">A Quick-Start Guide to<br>
Bedwyr v1.4</span></span></h1><h3 class="titlerest">Quentin Heath<br>
 Inria Saclay–Île-de-France &amp; LIX, École polytechnique</h3></td></tr>
</table>
<!--TOC section id="sec1" Overview-->
<h2 class="section" id="sec1">1  Overview</h2><!--SEC END --><p>Bedwyr is a generalization of logic programming that allows model
checking directly on syntactic expression.</p><p>The logic manipulated, a subset of LINC (for <em>lambda, induction,
nabla, co-induction</em>), contains object-level λ-abstractions,
∇ (nominal) quantification, and (co-)inductive definitions.
While LINC is a extension of higher-order intuitionistic logic, Bedwyr
formulae are restricted to a fragment where connectives on the left of
an implication must have invertible rules (i.e. no universal
quantifier nor implication – this enables the closed-world assumption
when identifying finite success and finite failure), while equalities
are restricted to the <span class="c008">L</span><sub>λ</sub> fragment (allowing for the use of
higher-order pattern unification).</p><p>The OCaml implementation is part of an open source project. The
<a href="http://slimmer.gforge.inria.fr/bedwyr/#download">web page</a>
offers multiple ways to get it:
</p><ul class="itemize"><li class="li-itemize">SVN repository
</li><li class="li-itemize">tarballs
</li><li class="li-itemize">precompiled binaries
</li><li class="li-itemize">GNU/Linux packages
</li><li class="li-itemize">Windows installer
</li></ul><p>The
<a href="http://slimmer.gforge.inria.fr/bedwyr/#documentation">documentation</a>
includes this quick-start guide, a reference manual and the
source-code documentation.</p>
<!--TOC section id="sec2" Input-->
<h2 class="section" id="sec2">2  Input</h2><!--SEC END --><p>Input sources can be plain text definition files (<span class="c004">*.def</span>), the
REPL (read-eval-print loop), the 
<code><span class="c002">read</span></code> predicate, and
arguments to the <span class="c003">-d</span>, <span class="c003">-e</span> and <span class="c003">-c</span> CLI
(command-line interface) options. Three modes are available:
</p><dl class="description"><dt class="dt-description"><span class="c009">definition mode</span></dt><dd class="dd-description"> is used in <span class="c004">*.def</span> files and with
<span class="c003">-d</span>
</dd><dt class="dt-description"><span class="c009">toplevel mode</span></dt><dd class="dd-description"> is used in the REPL and with <span class="c003">-e</span>
</dd><dt class="dt-description"><span class="c009">term mode</span></dt><dd class="dd-description"> is used at run-time via 
<code><span class="c002">read</span></code> and with
<span class="c003">-c</span>
</dd></dl><blockquote class="figure"><div class="center"><div class="center"><hr class="c014"></div>
<table class="cellpadding1" border=1 style="border-spacing:0;"><tr><td class="c013">&nbsp;</td><td class="c012">*.def</td><td class="c012">REPL</td><td class="c012">
<code><span class="c002">read</span></code></td><td class="c012">CLI </td></tr>
<tr><td class="c013"> <a href="#sec%3Acommands">2.1</a> 
<code><span class="c000"><U>Define</U></span> <span class="c002">p</span> <span class="c001">:</span> <span class="c010">prop</span>.</code></td><td class="c012">✓</td><td class="c012">&nbsp;</td><td class="c012">&nbsp;</td><td class="c012"><span class="c003">-d</span> </td></tr>
<tr><td class="c013"> <a href="#sec%3Aqueries">2.2</a> 
<code><span class="c002">X</span> <span class="c010">=</span> 42.</code></td><td class="c012">&nbsp;</td><td class="c012">✓</td><td class="c012">&nbsp;</td><td class="c012"><span class="c003">-e</span> </td></tr>
<tr><td class="c013"> <a href="#sec%3Ameta-commands">2.3</a> 
<span class="c000"><code>#env.</code></span></td><td class="c012">✓</td><td class="c012">✓</td><td class="c012">&nbsp;</td><td class="c012"><span class="c003">-d/-e</span> </td></tr>
<tr><td class="c013"> <a href="#sec%3Aterms">2.4</a> 
<code>1 <span class="c001">::</span> 2 <span class="c001">::</span> <span class="c010">nil</span>.</code></td><td class="c012">&nbsp;</td><td class="c012">&nbsp;</td><td class="c012">✓</td><td class="c012"><span class="c003">-c</span>
</td></tr>
</table>
<div class="center"><hr class="c014"></div></div></blockquote>
<!--TOC subsection id="sec3" Commands-->
<h3 class="subsection" id="sec3">2.1  Commands</h3><!--SEC END --><p>
<a id="sec:commands"></a></p><p>Commands are used in definition mode to declare new types and
constants, declare and define predicates, and define theorems (which
are not proved, but are used as lemmas).</p>
<!--TOC subsection id="sec4" Queries-->
<h3 class="subsection" id="sec4">2.2  Queries</h3><!--SEC END --><p>
<a id="sec:queries"></a></p><p>Queries are plain formulae (terms of type 
<span class="c010"><code>prop</code></span>), entered
at the toplevel, that Bedwyr attempts to solve. If possible, it
outputs the list of solutions (substitutions of the free variables).
Otherwise, if the formula is not handled by the prover (non-invertible
connective on the left) or by the unifier (not <span class="c008">L</span><sub>λ</sub>), resolution
aborts.</p>
<!--TOC subsection id="sec5" Meta-commands-->
<h3 class="subsection" id="sec5">2.3  Meta-commands</h3><!--SEC END --><p>
<a id="sec:meta-commands"></a></p><p>Meta-commands are used both in definition mode and at the toplevel,
mostly to improve the user experience by executing strictly
non-logical tasks, such as input (
<code><span class="c000">#include </span><span style="color:#9300D1">"inc.def"</span>.</code>),
output (
<code><span class="c000">#typeof </span><span class="c002">X</span> <span class="c002">Y</span> <span class="c001">::</span> <span class="c010">nil</span>.</code>) or testing
(
<code><span class="c000">#assert </span><span class="c010">true</span>.</code>). A few of them change proof structure,
but not provability (
<code><span class="c000">#freezing </span>4.</code>, 
<code><span class="c000">#saturation </span>2.</code>).</p>
<!--TOC subsection id="sec6" Terms-->
<h3 class="subsection" id="sec6">2.4  Terms</h3><!--SEC END --><p>
<a id="sec:terms"></a></p><p>Term-mode is a way to improve interactivity.</p>
<!--TOC section id="sec7" Sample definition file-->
<h2 class="section" id="sec7">3  Sample definition file</h2><!--SEC END --><p><a href="#def%3Amaxa"> 1</a> shows a complete sample definition file,
with the declarations for a type and two constants, along with a few predicates.</p><blockquote class="figure"><div class="center"><hr class="c014"></div>

<div class="center">Listing 1: <a id="def:maxa"></a><span style="background-color:#FFE5CC">maxa.def</span></div><br>
<table class="lstframe c011"><tr><td class="lstlisting"><span class="c007"><span class="c000"><U>Kind</U></span> <span class="c002">ch <span class="c010">type</span>.

<span class="c000"><U>Type</U></span> z  ch.
<span class="c000"><U>Type</U></span> s  ch <span class="c001">-&gt;</span> ch.

% The predicate a holds for 3, 5, and 2.
<span class="c000"><U>Define</U></span> a <span class="c001">:</span> ch <span class="c001">-&gt;</span> <span class="c010">prop</span> <span class="c000"><U>by</U></span>
  a (s (s (s z))) ;
  a (s (s (s (s (s z))))) ;
  a (s (s z)).

% The less-than-or-equal relation
<span class="c000"><U>Define</U> <U>inductive</U></span> leq <span class="c001">:</span> ch <span class="c001">-&gt;</span> ch <span class="c001">-&gt;</span> <span class="c010">prop</span>
<span class="c000"><U>by</U></span> leq z _
;  leq (s N) (s M) <span class="c001">:=</span> leq N M.

% Compute the maximum of a
<span class="c000"><U>Define</U></span> maxa <span class="c001">:</span> ch <span class="c001">-&gt;</span> <span class="c010">prop</span>
<span class="c000"><U>by</U></span> maxa N <span class="c001">:=</span>
     a N /\ <span class="c010">forall</span> x, a x <span class="c001">-&gt;</span> leq x N.</span></span></td></tr>
</table>
<div class="center"><hr class="c014"></div></blockquote><p>The predicate 
<code><span class="c002">a</span></code> is a typical example of what must be done to build
a Bedwyr example: even with a theoretically infinite search space
(here, Church numerals), Bedwyr only does finite reasoning, and hence must be
given an explicit description of its finite actual search space.</p><p>The use of the 
<code><span class="c000"><U>inductive</U></span></code> keyword has two consequences.
Firstly, memoization is used on the corresponding predicate;
secondly, it has an impact on the way loops in computation are handled.
Since the 
<code><span class="c002">leq</span></code> predicate obviously cannot loop,
only the first aspect is used here (meaning we might as well have used the

<code><span class="c000"><U>coinductive</U></span></code> keyword instead).</p>
<!--TOC section id="sec8" REPL demo-->
<h2 class="section" id="sec8">4  REPL demo</h2><!--SEC END --><p><a href="#repl%3Amaxa"> 2</a> shows an example of use of the interactive toplevel
following the invocation of <code>bedwyr maxa.def</code>.</p><blockquote class="figure"><div class="center"><hr class="c014"></div>
<div class="center">Listing 2: <a id="repl:maxa"></a>Interactive session</div><br>
<table class="lstframe c011"><tr><td class="lstlisting"><span style="font-size:small;color:black"><span class="c006">?=</span> #env.
*** Types ***
   option <span class="c001">:</span> * <span class="c001">-&gt;</span> *
   <span class="c010">list</span> <span class="c001">:</span> * <span class="c001">-&gt;</span> *
   ch <span class="c001">:</span> *
*** Constants ***
   (<span class="c001">::</span>) <span class="c001">:</span> A <span class="c001">-&gt;</span> <span class="c010">list</span> A <span class="c001">-&gt;</span> <span class="c010">list</span> A
   <span style="color:#19194C"><span class="c009">nil</span> <span class="c001">:</span> <span class="c009">list</span></span> A
   opnone <span class="c001">:</span> option A
   opsome <span class="c001">:</span> A <span class="c001">-&gt;</span> option A
   s <span class="c001">:</span> ch <span class="c001">-&gt;</span> ch
   z <span class="c001">:</span> ch
*** Predicates ***
   a <span class="c001">:</span> ch <span class="c001">-&gt;</span> <span class="c010">prop</span>
 I leq <span class="c001">:</span> ch <span class="c001">-&gt;</span> ch <span class="c001">-&gt;</span> <span class="c010">prop</span>
   maxa <span class="c001">:</span> ch <span class="c001">-&gt;</span> <span class="c010">prop</span>
   member <span class="c001">:</span> A <span class="c001">-&gt;</span> <span class="c010">list</span> A <span class="c001">-&gt;</span> <span class="c009"><span style="color:#19194C">prop</span>
<span class="c005">?=</span></span> read Y /\ leq X Y.
 ?&gt; s z.
<span class="c009"><span class="c005">Solution</span> <span class="c005">found:</span></span>
 X <span class="c010">=</span> z
 Y <span class="c010">=</span> s z
<span class="c006">More</span> [y] ? y
<span class="c009"><span class="c005">Solution</span> <span class="c005">found:</span></span>
 X <span class="c010">=</span> s z
 Y <span class="c010">=</span> s z
<span class="c006">More</span> [y] ? y
<span class="c009"><span class="c005">No</span> <span class="c005">more</span> <span class="c005">solutions</span></span>.
<span class="c006">?=</span> maxa X.
<span class="c009"><span class="c005">Solution</span> <span class="c005">found:</span></span>
 X <span class="c010">=</span> s (s (s (s (s z))))
<span class="c006">More</span> [y] ? y
<span class="c009"><span class="c005">No</span> <span class="c005">more</span> <span class="c005">solutions</span></span>.
<span class="c006">?=</span> #exit.</span></td></tr>
</table><div class="center"><hr class="c014"></div></blockquote><p>The 
<span class="c000"><code>#env.</code></span> meta-command shows all declared objects
(including the standard pre-declared list-related objects), and
informs 
<code><span class="c002">leq</span></code> is inductive. The call to the queries

<code><span class="c002">leq</span> <span class="c002">X</span> (<span class="c002">s</span> <span class="c002">z</span>).</code> and 
<code><span class="c002">maxa</span> <span class="c002">X</span>.</code> offer to display all
solutions, one by one.
A subsequent call to 
<code><span class="c000">#show_table </span><span class="c002">leq</span>.</code> would show the table
filled by the second query with 
<code><span class="c002">leq</span></code>-headed atoms, either
marked as proved or disproved.</p><!--CUT END -->
<!--HTMLFOOT-->
<!--ENDHTML-->
<!--FOOTER-->
<hr style="height:2"><blockquote class="quote"><em>This document was translated from L<sup>A</sup>T<sub>E</sub>X by
</em><a href="http://hevea.inria.fr/index.html"><em>H<span class="c007"><sup>E</sup></span>V<span class="c007"><sup>E</sup></span>A</em></a><em>.</em></blockquote></body>
</html>
