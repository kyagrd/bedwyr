<span class="Comment">% System muFa (muF augmented with certificates)</span>
<span class="Comment">%</span>
<span class="Comment">%  C.f. &quot;A framework for proof certificates in model checking&quot;,</span>
<span class="Comment">%  §A, &quot;The augmented focusing proof system µF^a&quot;</span>

<span class="Comment">% The following results simply by deleting the frozen atom zone from the complete kernel.</span>

<span class="Statement">Define</span> syncR  <span class="Special">:</span> cert <span class="Special">-&gt;</span> bool <span class="Special">-&gt;</span> <span class="Type">prop</span><span class="Special">,</span>
       syncL  <span class="Special">:</span> cert <span class="Special">-&gt;</span> bool <span class="Special">-&gt;</span> <span class="Type">prop</span><span class="Special">,</span>
       asyncR <span class="Special">:</span> cert <span class="Special">-&gt;</span> list bool <span class="Special">-&gt;</span> list bool <span class="Special">-&gt;</span> <span class="Type">prop</span><span class="Special">,</span>
       asyncL <span class="Special">:</span> cert <span class="Special">-&gt;</span> list bool <span class="Special">-&gt;</span> list bool <span class="Special">-&gt;</span> list bool <span class="Special">-&gt;</span> <span class="Type">prop</span> <span class="Statement">by</span>

  <span class="Comment">% synchronous right rules</span>
  syncR <span class="Identifier">Cert</span> <span class="Statement">(</span>eq <span class="Identifier">T</span> <span class="Identifier">T</span><span class="Statement">)</span>     <span class="Special">:=</span> equalE <span class="Identifier">Cert</span> <span class="Special">;</span>
  syncR <span class="Identifier">Cert</span> one          <span class="Special">:=</span> oneE <span class="Identifier">Cert</span> <span class="Special">;</span>
  syncR <span class="Identifier">Cert</span> <span class="Statement">(</span>tensor <span class="Identifier">B</span> <span class="Identifier">C</span><span class="Statement">)</span> <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span><span class="Statement">,</span> tensorE <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Statement">/\</span>
    syncR <span class="Identifier">Cert1</span> <span class="Identifier">B</span> <span class="Statement">/\</span> syncR <span class="Identifier">Cert2</span> <span class="Identifier">C</span> <span class="Special">;</span>
  syncR <span class="Identifier">Cert</span> <span class="Statement">(</span>oplus <span class="Identifier">B</span> <span class="Identifier">C</span><span class="Statement">)</span>  <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">Ch</span><span class="Statement">,</span> oplusE <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">Ch</span> <span class="Statement">/\</span>
    <span class="Statement">((</span><span class="Identifier">Ch</span> <span class="Statement">=</span> left <span class="Statement">/\</span> syncR <span class="Identifier">Cert1</span> <span class="Identifier">B</span><span class="Statement">)</span> <span class="Statement">\/</span> <span class="Statement">(</span><span class="Identifier">Ch</span> <span class="Statement">=</span> right <span class="Statement">/\</span> syncR <span class="Identifier">Cert1</span> <span class="Identifier">C</span><span class="Statement">))</span> <span class="Special">;</span>
  syncR <span class="Identifier">Cert</span> <span class="Statement">(</span>some <span class="Identifier">B</span><span class="Statement">)</span>     <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">T</span><span class="Statement">,</span> someE <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">T</span> <span class="Statement">/\</span>
    syncR <span class="Identifier">Cert1</span> <span class="Statement">(</span><span class="Identifier">B</span> <span class="Identifier">T</span><span class="Statement">)</span> <span class="Special">;</span>
  syncR <span class="Identifier">Cert</span> <span class="Identifier">Atom</span>         <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Unfold</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> mu_unfold <span class="Identifier">Atom</span> <span class="Identifier">Unfold</span> <span class="Statement">/\</span> mu_unfoldE <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    syncR <span class="Identifier">Cert'</span> <span class="Identifier">Unfold</span> <span class="Special">;</span>
  <span class="Comment">%syncR Cert Atom         := mu_atom Atom /\ initR Cert /\ member Atom Fs ;</span>
  syncR <span class="Identifier">Cert</span> <span class="Identifier">N</span>            <span class="Special">:=</span> negative <span class="Identifier">N</span> <span class="Statement">/\</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> releaseR <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    asyncR <span class="Identifier">Cert'</span> nil <span class="Statement">(</span><span class="Identifier">N</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Special">;</span>

  <span class="Comment">% synchronous left rules</span>
  syncL <span class="Identifier">Cert</span> <span class="Statement">(</span>neq <span class="Identifier">T</span> <span class="Identifier">T</span><span class="Statement">)</span>    <span class="Special">:=</span> unequalE <span class="Identifier">Cert</span> <span class="Special">;</span>
  syncL <span class="Identifier">Cert</span> bot          <span class="Special">:=</span> botE <span class="Identifier">Cert</span> <span class="Special">;</span>
  syncL <span class="Identifier">Cert</span> <span class="Statement">(</span>imp <span class="Identifier">B</span> <span class="Identifier">C</span><span class="Statement">)</span>    <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span><span class="Statement">,</span> impE <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Statement">/\</span>
    syncR <span class="Identifier">Cert1</span> <span class="Identifier">B</span> <span class="Statement">/\</span> syncL <span class="Identifier">Cert2</span> <span class="Identifier">C</span> <span class="Special">;</span>
  syncL <span class="Identifier">Cert</span> <span class="Statement">(</span>aand <span class="Identifier">B</span> <span class="Identifier">C</span><span class="Statement">)</span>   <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">Ch</span><span class="Statement">,</span> aandE <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">Ch</span> <span class="Statement">/\</span>
    <span class="Statement">((</span><span class="Identifier">Ch</span> <span class="Statement">=</span> left <span class="Statement">/\</span> syncL <span class="Identifier">Cert1</span> <span class="Identifier">B</span><span class="Statement">)</span> <span class="Statement">\/</span> <span class="Statement">(</span><span class="Identifier">Ch</span> <span class="Statement">=</span> right <span class="Statement">/\</span> syncL <span class="Identifier">Cert1</span> <span class="Identifier">C</span><span class="Statement">))</span> <span class="Special">;</span>
  syncL <span class="Identifier">Cert</span> <span class="Statement">(</span>all <span class="Identifier">B</span><span class="Statement">)</span>      <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">T</span><span class="Statement">,</span> allE <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">T</span> <span class="Statement">/\</span>
    syncL <span class="Identifier">Cert1</span> <span class="Statement">(</span><span class="Identifier">B</span> <span class="Identifier">T</span><span class="Statement">)</span> <span class="Special">;</span>
  syncL <span class="Identifier">Cert</span> <span class="Identifier">Atom</span>         <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Unfold</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> nu_unfold <span class="Identifier">Atom</span> <span class="Identifier">Unfold</span> <span class="Statement">/\</span> nu_unfoldE <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    syncL <span class="Identifier">Cert'</span> <span class="Identifier">Unfold</span> <span class="Special">;</span>
  <span class="Comment">%syncL Cert Atom         := nu_atom Atom /\ initL Cert /\ member Atom Fs;</span>
  syncL <span class="Identifier">Cert</span> <span class="Identifier">P</span>            <span class="Special">:=</span> positive <span class="Identifier">P</span> <span class="Statement">/\</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> releaseL <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    asyncL <span class="Identifier">Cert'</span> nil <span class="Statement">(</span><span class="Identifier">P</span> <span class="Special">::</span> nil<span class="Statement">)</span> nil <span class="Special">;</span>

  <span class="Comment">% asynchronous right rules</span>
  asyncR <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>neq <span class="Identifier">T</span> <span class="Identifier">S</span><span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span>   <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> unequalC <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    <span class="Statement">(</span><span class="Identifier">T</span> <span class="Statement">=</span> <span class="Identifier">S</span> <span class="Statement">-&gt;</span> asyncR <span class="Identifier">Cert'</span> <span class="Identifier">Ns</span> nil<span class="Statement">)</span> <span class="Special">;</span>
  asyncR <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">(</span>bot <span class="Special">::</span> nil<span class="Statement">)</span>         <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> botC <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    asyncR <span class="Identifier">Cert'</span> <span class="Identifier">Ns</span> nil <span class="Special">;</span>
  asyncR <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>imp <span class="Identifier">A</span> <span class="Identifier">B</span><span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span>   <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> impC <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    asyncL <span class="Identifier">Cert'</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">A</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Statement">(</span><span class="Identifier">B</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Special">;</span>
  asyncR <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">(</span>top <span class="Special">::</span> nil<span class="Statement">)</span>         <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> topC <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Special">;</span>
  asyncR <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>aand <span class="Identifier">B</span> <span class="Identifier">C</span><span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span>  <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span><span class="Statement">,</span> aandC <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Statement">/\</span>
    asyncR <span class="Identifier">Cert1</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">B</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Statement">/\</span> asyncR <span class="Identifier">Cert2</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">C</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Special">;</span>
  asyncR <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>all <span class="Identifier">B</span><span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span>     <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> allC <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    <span class="Identifier">forall</span> x<span class="Statement">,</span> asyncR <span class="Statement">(</span><span class="Identifier">Cert'</span> x<span class="Statement">)</span> <span class="Identifier">Ns</span> <span class="Statement">((</span><span class="Identifier">B</span> x<span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Special">;</span>
  <span class="Comment">% two treatments for nu on the right unfold and coinduction.</span>
  asyncR <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">Atom</span> <span class="Special">::</span> nil<span class="Statement">)</span>        <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Unfold</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> nu_unfold <span class="Identifier">Atom</span> <span class="Identifier">Unfold</span> <span class="Statement">/\</span> nu_unfoldC <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    asyncR <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">Unfold</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Special">;</span>
  asyncR <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>nu0 <span class="Identifier">B</span><span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span>     <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Identifier">S</span><span class="Statement">,</span> nu0_invarC <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Identifier">S</span> <span class="Statement">/\</span>
    asyncR <span class="Identifier">Cert1</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">S</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Statement">/\</span>
    asyncL <span class="Identifier">Cert2</span> nil <span class="Statement">(</span><span class="Identifier">S</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Statement">((</span><span class="Identifier">B</span> <span class="Identifier">S</span><span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Special">;</span>
  asyncR <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>nu1 <span class="Identifier">B</span> <span class="Identifier">T</span><span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span>   <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Identifier">S</span><span class="Statement">,</span> nu1_invarC <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Identifier">S</span> <span class="Statement">/\</span>
    asyncR <span class="Identifier">Cert1</span> <span class="Identifier">Ns</span> <span class="Statement">((</span><span class="Identifier">S</span> <span class="Identifier">T</span><span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Statement">/\</span>
    <span class="Identifier">forall</span> x<span class="Statement">,</span> asyncL <span class="Statement">(</span><span class="Identifier">Cert2</span> x<span class="Statement">)</span> nil <span class="Statement">((</span><span class="Identifier">S</span> x<span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Statement">((</span><span class="Identifier">B</span> <span class="Identifier">S</span> x<span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Special">;</span>
  asyncR <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>nu2 <span class="Identifier">B</span> <span class="Identifier">T</span> <span class="Identifier">U</span><span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Identifier">S</span><span class="Statement">,</span> nu2_invarC <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Identifier">S</span> <span class="Statement">/\</span>
    asyncR <span class="Identifier">Cert1</span> <span class="Identifier">Ns</span> <span class="Statement">((</span><span class="Identifier">S</span> <span class="Identifier">T</span> <span class="Identifier">U</span><span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Statement">/\</span>
    <span class="Identifier">forall</span> x y<span class="Statement">,</span> asyncL <span class="Statement">(</span><span class="Identifier">Cert2</span> x y<span class="Statement">)</span> nil <span class="Statement">((</span><span class="Identifier">S</span> x y<span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Statement">((</span><span class="Identifier">B</span> <span class="Identifier">S</span> x y<span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Special">;</span>
  asyncR <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">Pos</span> <span class="Special">::</span> nil<span class="Statement">)</span>         <span class="Special">:=</span> positive <span class="Identifier">Pos</span> <span class="Statement">/\</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> switchR <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    syncR <span class="Identifier">Cert'</span> <span class="Identifier">Pos</span> <span class="Special">;</span>
  asyncR <span class="Identifier">Cert</span> <span class="Statement">(</span><span class="Identifier">N</span> <span class="Special">::</span> nil<span class="Statement">)</span> nil          <span class="Special">:=</span>
    asyncL <span class="Identifier">Cert</span> <span class="Statement">(</span><span class="Identifier">N</span> <span class="Special">::</span> nil<span class="Statement">)</span> nil nil <span class="Special">;</span>
  <span class="Comment">%asyncR Cert Ns nil (Atom :: nil) := nu_atom Atom /\ exists Cert', freezeR Cert Cert' /\</span>
  <span class="Comment">%                                           Fs' = Atom :: Fs /\ asyncL Cert' Ns nil nil ;</span>
  asyncR <span class="Identifier">Cert</span> nil <span class="Statement">(</span><span class="Identifier">P</span> <span class="Special">::</span> nil<span class="Statement">)</span>          <span class="Special">:=</span> positive <span class="Identifier">P</span> <span class="Statement">/\</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> switchR <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    syncR <span class="Identifier">Cert'</span> <span class="Identifier">P</span> <span class="Special">;</span>

  <span class="Comment">% asynchronous left rules</span>
  asyncL <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>eq <span class="Identifier">T</span> <span class="Identifier">S</span><span class="Statement">)</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span>     <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> equalC <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    <span class="Statement">((</span><span class="Identifier">T</span> <span class="Statement">=</span> <span class="Identifier">S</span><span class="Statement">)</span> <span class="Statement">-&gt;</span> asyncL <span class="Identifier">Cert'</span> <span class="Identifier">Ns</span> <span class="Identifier">Gamma</span> <span class="Identifier">Delta</span><span class="Statement">)</span> <span class="Special">;</span>
  asyncL <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">(</span>one <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span>          <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> oneC <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    asyncL <span class="Identifier">Cert'</span> <span class="Identifier">Ns</span> <span class="Identifier">Gamma</span> <span class="Identifier">Delta</span> <span class="Special">;</span>
  asyncL <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>tensor <span class="Identifier">C</span> <span class="Identifier">D</span><span class="Statement">)</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span> <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> tensorC <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    asyncL <span class="Identifier">Cert'</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">C</span> <span class="Special">::</span> <span class="Identifier">D</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span> <span class="Special">;</span>
  asyncL <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">(</span>zero <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span>         <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> zeroC <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Special">;</span>
  asyncL <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>oplus <span class="Identifier">C</span> <span class="Identifier">D</span><span class="Statement">)</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span>  <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span><span class="Statement">,</span> oplusC <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Statement">/\</span>
    asyncL <span class="Identifier">Cert1</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">C</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span> <span class="Statement">/\</span> asyncL <span class="Identifier">Cert1</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">D</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span><span class="Special">;</span>
  asyncL <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>some <span class="Identifier">C</span><span class="Statement">)</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span>     <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> someC <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    <span class="Identifier">forall</span> x<span class="Statement">,</span> asyncL <span class="Statement">(</span><span class="Identifier">Cert'</span> x<span class="Statement">)</span> <span class="Identifier">Ns</span> <span class="Statement">((</span><span class="Identifier">C</span> x<span class="Statement">)</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span> <span class="Special">;</span>
  <span class="Comment">% two treatments for mu on the left: unfold and induction.</span>
  asyncL <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">Atom</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span>         <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Unfold</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> mu_unfold <span class="Identifier">Atom</span> <span class="Identifier">Unfold</span> <span class="Statement">/\</span> mu_unfoldC <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    asyncL <span class="Identifier">Cert'</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">Unfold</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span> <span class="Special">;</span>
  asyncL <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>mu0 <span class="Identifier">B</span><span class="Statement">)</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span>      <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Identifier">S</span><span class="Statement">,</span> mu0_invarC <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Identifier">S</span> <span class="Statement">/\</span>
    asyncL <span class="Identifier">Cert1</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">S</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span> <span class="Statement">/\</span> asyncL <span class="Identifier">Cert2</span> nil <span class="Statement">((</span><span class="Identifier">B</span> <span class="Identifier">S</span><span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Statement">(</span><span class="Identifier">S</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Special">;</span>
  asyncL <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>mu1 <span class="Identifier">B</span> <span class="Identifier">U</span><span class="Statement">)</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span>    <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Identifier">S</span><span class="Statement">,</span> mu1_invarC <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Identifier">S</span> <span class="Statement">/\</span>
    asyncL <span class="Identifier">Cert1</span> <span class="Identifier">Ns</span> <span class="Statement">((</span><span class="Identifier">S</span> <span class="Identifier">U</span><span class="Statement">)</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span> <span class="Statement">/\</span>
    <span class="Identifier">forall</span> x<span class="Statement">,</span> asyncL <span class="Statement">(</span><span class="Identifier">Cert2</span> x<span class="Statement">)</span> nil <span class="Statement">((</span><span class="Identifier">B</span> <span class="Identifier">S</span> x<span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Statement">((</span><span class="Identifier">S</span> x<span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Special">;</span>
  asyncL <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">((</span>mu2 <span class="Identifier">B</span> <span class="Identifier">U</span> <span class="Identifier">V</span><span class="Statement">)</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span>  <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Identifier">S</span><span class="Statement">,</span> mu2_invarC <span class="Identifier">Cert</span> <span class="Identifier">Cert1</span> <span class="Identifier">Cert2</span> <span class="Identifier">S</span> <span class="Statement">/\</span>
    asyncL <span class="Identifier">Cert1</span> <span class="Identifier">Ns</span> <span class="Statement">((</span><span class="Identifier">S</span> <span class="Identifier">U</span> <span class="Identifier">V</span><span class="Statement">)</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span> <span class="Statement">/\</span>
    <span class="Identifier">forall</span> x y<span class="Statement">,</span> asyncL <span class="Statement">(</span><span class="Identifier">Cert2</span> x y<span class="Statement">)</span> nil <span class="Statement">((</span><span class="Identifier">B</span> <span class="Identifier">S</span> x y<span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Statement">((</span><span class="Identifier">S</span> x y<span class="Statement">)</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Special">;</span>
  <span class="Comment">%asyncL Cert Ns (Atom :: Gamma) Delta        := mu_atom Atom /\ exists Cert', freezeL Cert Cert' /\</span>
  <span class="Comment">%                                           Fs' = Atom :: Fs /\ asyncL Cert' Ns Gamma Delta ;</span>
  <span class="Comment">% basically a store, but not an explicit rule in this system</span>
  asyncL <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">N</span> <span class="Special">::</span> <span class="Identifier">Gamma</span><span class="Statement">)</span> <span class="Identifier">Delta</span>            <span class="Special">:=</span> negative <span class="Identifier">N</span> <span class="Statement">/\</span>
    asyncL <span class="Identifier">Cert</span> <span class="Statement">(</span><span class="Identifier">N</span> <span class="Special">::</span> <span class="Identifier">Ns</span><span class="Statement">)</span> <span class="Identifier">Gamma</span> <span class="Identifier">Delta</span> <span class="Special">;</span>
  asyncL <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> nil <span class="Statement">(</span><span class="Identifier">G</span> <span class="Special">::</span> nil<span class="Statement">)</span>                <span class="Special">:=</span>
    asyncR <span class="Identifier">Cert</span> <span class="Identifier">Ns</span> <span class="Statement">(</span><span class="Identifier">G</span> <span class="Special">::</span> nil<span class="Statement">)</span> <span class="Special">;</span>
  asyncL <span class="Identifier">Cert</span> <span class="Statement">(</span><span class="Identifier">N</span> <span class="Special">::</span> nil<span class="Statement">)</span> nil nil               <span class="Special">:=</span> <span class="Identifier">exists</span> <span class="Identifier">Cert'</span><span class="Statement">,</span> switchL <span class="Identifier">Cert</span> <span class="Identifier">Cert'</span> <span class="Statement">/\</span>
    syncL <span class="Identifier">Cert'</span> <span class="Identifier">N</span><span class="Special">.</span>
